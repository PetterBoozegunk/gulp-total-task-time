<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Plato - index.js</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->

  <link href="../../assets/css/vendor/morris.css" rel="stylesheet">
  <link href="../../assets/css/vendor/bootstrap.css" rel="stylesheet">
  <link href="../../assets/css/vendor/font-awesome.css" rel="stylesheet">
  <link href="../../assets/css/vendor/codemirror.css" rel="stylesheet">
  <link href="../../assets/css/plato.css" rel="stylesheet">
  <link href="../../assets/css/plato-file.css" rel="stylesheet">

</head>

<body>

<div class="navbar navbar-fixed-top">
  <div class="container">
    <a class="navbar-brand" href="http://github.com/es-analysis/plato">Plato on Github</a>
    <ul class="nav navbar-nav">
      <li>
        <a href="../../index.html">Report Home</a>
      </li>
    </ul>
  </div>
</div>

<div class="jumbotron">
  <div class="container">
    <h1>index.js</h1>
  </div>
</div>

<div class="container aggregate-stats">
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Maintainability <a href="http://blogs.msdn.com/b/codeanalysis/archive/2007/11/20/maintainability-index-range-and-meaning.aspx"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="A value between 0 and 100 that represents the relative ease of maintaining the code. A high value means better maintainability." data-original-title="Maintainability Index"  data-container="body"></i></a></h2>
      <p class="stat">78.41</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Lines of code <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h2>
      <p class="stat">191</p>
    </div>
  </div>
  <div class="row historical">
    <div class="col-md-6">
      <p id="chart_historical_maint" class="chart"></p>
    </div>
    <div class="col-md-6">
      <p id="chart_historical_sloc" class="chart"></p>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h2 class="header">Difficulty  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="The difficulty measure is related to the difficulty of the program to write or understand." data-original-title="Difficulty" data-container="body"></i></a></h2>
      <p class="stat">37.35</p>
    </div>
    <div class="col-md-6">
      <h2 class="header">Estimated Errors  <a href="http://en.wikipedia.org/wiki/Halstead_complexity_measures"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Halstead's delivered bugs is an estimate for the number of errors in the implementation." data-original-title="Delivered Bugs" data-container="body"></i></a></h2>
      <p class="stat">2.05</p>
    </div>
  </div>
</div>

<div class="container charts">
  <div class="row">
    <h2 class="header">Function weight</h2>
  </div>
  <div class="row">
    <div class="col-md-6">
      <h3 class="chart-header">By Complexity <a href="http://en.wikipedia.org/wiki/Cyclomatic_complexity"><i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="This metric counts the number of distinct paths through a block of code. Lower values are better." data-original-title="Cyclomatic Complexity" data-container="body"></i></a></h3>
      <div id="fn-by-complexity" class="stat"></div>
    </div>
    <div class="col-md-6">
      <h3 class="chart-header">By SLOC  <i class="icon icon-info-sign" rel="popover" data-placement="top" data-trigger="hover" data-content="Source Lines of Code / Logical Lines of Code" data-original-title="SLOC/LSLOC" data-container="body"></i></h3>
      <div id="fn-by-sloc" class="stat"></div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <textarea id="file-source" class="col-md-12">/*jslint node: true*/

&quot;use strict&quot;;

var gulp = require(&#039;gulp&#039;),
    chalk = require(&#039;chalk&#039;),

    taskTime = {
        tasksRunning: 0,
        formatTime: function (hmsms) { // hmsms = Hours (or) Minutes (or) Seconds (or) MilliSeconds
            var hmsmsStr = hmsms.toString();

            return (hmsms &lt; 10) ? &quot;0&quot; + hmsmsStr : hmsmsStr;
        },
        getHours: function (duration) {
            var h = parseInt((duration / (1000 * 60 * 60)) % 24, 10);

            return h ? taskTime.formatTime(h) : &#039;00&#039;;
        },
        getMinutes: function (duration) {
            var m = parseInt((duration / (1000 * 60)) % 60, 10);

            return &#039;:&#039; + (m ? taskTime.formatTime(m) : &#039;00&#039;);
        },
        getSeconds: function (duration) {
            var s = parseInt((duration / 1000) % 60, 10);

            return &#039;:&#039; + (s ? taskTime.formatTime(s) : &#039;00&#039;);
        },
        getMilliSeconds: function (duration) {
            var ms = parseInt((duration % 1000) / 100, 10);

            return &#039;:&#039; + (ms ? ms.toString() : &#039;000&#039;);
        },
        addTimeToString: function (timeStr, prettyTimeStr) {
            if (timeStr) {
                prettyTimeStr = prettyTimeStr + timeStr;
            }

            return prettyTimeStr;
        },
        formatSecondsMilliseconds: function (noZeros, ms) {
            if (ms) {
                noZeros = noZeros.replace(/(\d+)(s)(\s\d+ms)/, &quot;$1.&quot; + ms.join().replace(/ms$/, &quot;s&quot;));
            }

            noZeros = noZeros.replace(/\s0s$/, &quot;&quot;);
            noZeros = noZeros.replace(/(^0\.)(0+)?([\d]+)(s$)/, &quot;$3ms&quot;);
            noZeros = noZeros.replace(/(\.)(0+)?([1-9]+)?(0+)(s$)/, &quot;$1$2$3$5&quot;);

            return noZeros.replace(/(^0)!(\w)/, &quot;&quot;);
        },
        removeZeros: function (prettyTimeStr) {
            var ms = prettyTimeStr.match(/\d+ms$/g),
                noZeros = prettyTimeStr.replace(/(^|\s)0/g, &#039;$1&#039;);

            return taskTime.formatSecondsMilliseconds(noZeros, ms);
        },
        checkAddToPrettyTimeStr: function (str, time, index) {
            return (!/^0{2,3}$/.test(str) || time[index] === &quot;s&quot;);
        },
        addToPrettyTimeStr: function (str, time, index, newPrettyStr) {
            if (taskTime.checkAddToPrettyTimeStr(str, time, index)) {
                newPrettyStr += str + time[index] + &#039; &#039;;
            }

            return newPrettyStr;
        },
        formatPrettyTime: function (prettyTimeStr) {
            var time = [&#039;h&#039;, &#039;m&#039;, &#039;s&#039;, &#039;ms&#039;],
                newPrettyStr = &#039;&#039;;

            prettyTimeStr.split(&#039;:&#039;).forEach(function (str, index) {
                newPrettyStr = taskTime.addToPrettyTimeStr(str, time, index, newPrettyStr);
            });

            return taskTime.removeZeros(newPrettyStr.trim());
        },
        getPrettyTime: function () {
            var args = arguments,
                prettyTimeStr = &#039;&#039;;

            Object.keys(args).forEach(function (index) {
                prettyTimeStr = taskTime.addTimeToString(args[index], prettyTimeStr);
            });

            return taskTime.formatPrettyTime(prettyTimeStr);
        },
        getDuration: function (duration) {
            var hours = taskTime.getHours(duration),
                minutes = taskTime.getMinutes(duration),
                seconds = taskTime.getSeconds(duration),
                milliseconds = taskTime.getMilliSeconds(duration);

            return taskTime.getPrettyTime(hours, minutes, seconds, milliseconds);
        },
        logEnd: function () {
            var duration = Math.round((taskTime.end[0] * 1000) + (taskTime.end[1] / 1000000));

            console.log(chalk.magenta(&#039;Total &#039; + taskTime.getDuration(duration)));
        },
        taskStart: function () {
            if (taskTime.tasksRunning === 0) {
                taskTime.start = process.hrtime();
            }

            taskTime.tasksRunning += 1;
        },
        taskStop: function () {
            setTimeout(function () {
                taskTime.tasksRunning -= 1;

                if (taskTime.tasksRunning === 0) {
                    taskTime.end = process.hrtime(taskTime.start);
                    taskTime.logEnd();
                }
            }, 0);
        }
    },
    testsObj = {
        tests: [{
            input: [&#039;00&#039;, &#039;:00&#039;, &#039;:00&#039;, &#039;:000&#039;],
            expect: &quot;0s&quot;
        }, {
            input: [&#039;01&#039;, &#039;:00&#039;, &#039;:00&#039;, &#039;:000&#039;],
            expect: &quot;1h&quot;
        }, {
            input: [&#039;00&#039;, &#039;:01&#039;, &#039;:00&#039;, &#039;:000&#039;],
            expect: &quot;1m&quot;
        }, {
            input: [&#039;00&#039;, &#039;:00&#039;, &#039;:01&#039;, &#039;:000&#039;],
            expect: &quot;1s&quot;
        }, {
            input: [&#039;00&#039;, &#039;:00&#039;, &#039;:00&#039;, &#039;:001&#039;],
            expect: &quot;1ms&quot;
        }, {
            input: [&#039;00&#039;, &#039;:01&#039;, &#039;:01&#039;, &#039;:000&#039;],
            expect: &quot;1m 1s&quot;
        }, {
            input: [&#039;00&#039;, &#039;:00&#039;, &#039;:00&#039;, &#039;:859&#039;],
            expect: &quot;859ms&quot;
        }, {
            input: [&#039;00&#039;, &#039;:00&#039;, &#039;:14&#039;, &#039;:300&#039;],
            expect: &quot;14.3s&quot;
        }, {
            input: [&#039;00&#039;, &#039;:10&#039;, &#039;:09&#039;, &#039;:000&#039;],
            expect: &quot;10m 9s&quot;
        }, {
            input: [&#039;00&#039;, &#039;:00&#039;, &#039;:00&#039;, &#039;:010&#039;],
            expect: &quot;10ms&quot;
        }, {
            input: [&#039;00&#039;, &#039;:00&#039;, &#039;:02&#039;, &#039;:037&#039;],
            expect: &quot;2.037s&quot;
        }, {
            input: [&#039;00&#039;, &#039;:00&#039;, &#039;:15&#039;, &#039;:002&#039;],
            expect: &quot;15.002s&quot;
        }, {
            input: [&#039;10&#039;, &#039;:08&#039;, &#039;:09&#039;, &#039;:007&#039;],
            expect: &quot;10h 8m 9.007s&quot;
        }, {
            input: [&#039;09&#039;, &#039;:18&#039;, &#039;:00&#039;, &#039;:010&#039;],
            expect: &quot;9h 18m 0.01s&quot;
        }, {
            input: [&#039;00&#039;, &#039;:00&#039;, &#039;:00&#039;, &#039;:044&#039;],
            expect: &quot;44ms&quot;
        }],
        pass: function (message, test) {
            console.log(chalk.green(&#039;PASS: input = &#039; + message + &#039; =&gt; &#039; + test));
        },
        fail: function (message, expect, saw) {
            var failMessage = &#039;FAIL: input = &#039; + message + &#039; expected &#039; + expect + &#039; saw &#039; + saw;

            throw new Error(chalk.red(failMessage));
        },
        runTests: function () {
            testsObj.tests.forEach(function (testObj) {
                var test = taskTime.getPrettyTime.apply(this, testObj.input);

                if (test === testObj.expect) {
                    testsObj.pass(testObj.input.join().replace(/,/g, &#039;&#039;), test);
                } else {
                    testsObj.fail(testObj.input.join().replace(/,/g, &#039;&#039;), testObj.expect, test);
                }
            });
        }
    };

gulp.on(&#039;task_start&#039;, taskTime.taskStart);
gulp.on(&#039;task_stop&#039;, taskTime.taskStop);

module.exports = testsObj.runTests;</textarea>
  </div>
</div>

<footer class="footer">
  <div class="container">
    <p>.</p>
  </div>
</footer>

<script type="text/html" id="complexity-popover-template">
  <div class="complexity-notice">
    Complexity : {{ cyclomatic }} <br>
    Length : {{ halstead.length }} <br>
    Difficulty : {{ halstead.difficulty.toFixed(2) }} <br>
    Est # bugs : {{ halstead.bugs.toFixed(2) }}<br>
  </div>
</script>

<script type="text/javascript" src="../../assets/scripts/bundles/core-bundle.js"></script>
<script type="text/javascript" src="../../assets/scripts/bundles/codemirror.js"></script>
<script type="text/javascript" src="../../assets/scripts/codemirror.markpopovertext.js"></script>
<script type="text/javascript" src="report.js"></script>
<script type="text/javascript" src="report.history.js"></script>
<script type="text/javascript" src="../../assets/scripts/plato-file.js"></script>
</body>
</html>
